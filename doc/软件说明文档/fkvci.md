# FKVCI卡快速入门指南

> 版本：v1.0 | 作者：leiwei | 日期：2025-08-15

## 📖 简介

本指南适用于 **FKVCI-CANLIN 卡**。该设备是一款高性能的汽车总线接口卡，通过以太网与计算机连接，提供多路高速CAN通道和多路LIN通道，用于汽车总线的监控、仿真和测试。

**主要功能**:
- 多路高速CAN通道 (符合 ISO 11898-2)
- 多路LIN通道 (符合 LIN 2.x)
- 通过以太网与PC连接，低延迟、高吞吐率
- 硬件拨码开关，轻松设置设备索引
- DB9标准接口，方便连接
- 板载LED指示灯，实时监控通道状态

## 📦 产品清单与接口

### 硬件接口
- **供电**: USB Type-C
- **通信**: RJ45 以太网口
- **总线**: N x DB9 接口 (CAN1/LIN1/CAN2/LIN2/...)
- **设备索引**: 1 x 物理拨码开关 (0-15)

### DB9 引脚定义

#### **DB9-1 (CAN1 / LIN1)**
| 引脚 (Pin) | 定义 (Definition) | 说明 (Description) |
| :--------: | :---------------- | :----------------- |
|     1      | K                 | K-Line             |
|     2      | CAN1_L            | CAN1 总线 低电平   |
|     3      | GND               | 地线 (信号地)      |
|     4      | NC                |                    |
|     5      | NC                |                    |
|     6      | LIN1              | LIN1 总线          |
|     7      | CAN1_H            | CAN1 总线 高电平   |
|     8      | NC                |                    |
|     9      | NC                |                    |

#### **DB9-2 (CAN2 / LIN2)**
| 引脚 (Pin) | 定义 (Definition) | 说明 (Description) |
| :--------: | :---------------- | :----------------- |
|     1      | NC                |                    |
|     2      | CAN2_L            | CAN2 总线 低电平   |
|     3      | GND               | 地线 (信号地)      |
|     4      | NC                |                    |
|     5      | NC                |                    |
|     6      | LIN2              | LIN2 总线          |
|     7      | CAN2_H            | CAN2 总线 高电平   |
|     8      | NC                |                    |
|     9      | NC                |                    |

## 🚀 快速开始 (三步完成配置)

### 步骤 1: 硬件连接
1.  **供电**: 使用USB-C线连接VCI卡至PC或12V电源。
2.  **网络**: 使用网线连接VCI卡的RJ45口至PC的网口。
3.  **总线**: 根据DB9引脚定义，将CAN/LIN总线连接到您的ECU或测试网络。
    - **CAN**: 跨接120Ω终端电阻在 `CAN_H` 和 `CAN_L` 之间。
    - **LIN**: 确保所有节点的 `GND` 连接在一起。

### 步骤 2: 配置计算机网络
您需要为**与VCI设备直连的那个电脑网口**设置一个静态IP。

- **IP 地址**: `192.168.201.x` (x不能是130-145)
- **子网掩码**: `255.255.255.0`

> **示例**: 设置电脑IP为 `192.168.201.10`。

### 步骤 3: 测试设备连接
1.  **确定设备IP**: 查看VCI设备上的**白色拨码开关**位置（0-15），设备IP为 `192.168.201.130 + 拨码位置`。
    - 拨码在 `0` (默认) -> IP为 `192.168.201.130`
    - 拨码在 `1` -> IP为 `192.168.201.131`
2.  **Ping测试**: 打开命令提示符(CMD)，执行 `ping <设备IP>`。
    ```bash
    # 示例：测试拨码为0的设备
    ping 192.168.201.130
    ```
    收到回复即表示连接成功。现在您可以在软件中连接并使用设备了。

## 🔌 多设备连接 (高级)
当您的电脑连接了多台VCI设备时，需要在软件中指定**本地网卡IP**来区分连接。

> **场景示例**:
> - 电脑网口A (IP: `192.168.201.10`) -> VCI设备0 (IP: `192.168.201.130`)
> - 电脑网口B (IP: `192.168.201.11`) -> VCI设备1 (IP: `192.168.201.131`)
>
> **操作**: 若要连接**设备1**，在软件的“本地IP”处输入 `192.168.201.11`。

## ❗ 注意事项
- **CAN终端电阻**: **必须使用！** 高速CAN总线两端必须各有一个120Ω电阻。这是最常见的通信问题来源。
- **LIN共地**: **必须共地！** 所有LIN节点的GND必须连接在一起，否则无法通信。
- **防火墙**: 如果无法Ping通，请检查Windows防火墙或杀毒软件是否阻止了网络通信。
- **IP地址冲突**: 确保您为电脑设置的静态IP (`192.168.201.x`) 没有被网络中其他设备占用。
- **LED指示灯**:
    - **K**: 系统状态灯，绿灯闪烁表示设备运行正常。
    - **CANx/LINx**: 通道活动灯，收发数据时会闪烁，可用于快速判断总线是否活跃。

## 🔍 常见问题 (FAQ)

| 问题                   | 可能原因与解决方案                                           |
| :--------------------- | :----------------------------------------------------------- |
| **无法Ping通设备**     | 1. 检查IP配置是否正确，是否在同一网段。 <br> 2. 检查网线和USB供电是否连接牢固。 <br> 3. 关闭PC防火墙或添加入站规则。 |
| **CAN通信大量错误帧**  | 1. **首要检查终端电阻**，确保总线两端有且仅有两个120Ω电阻。 <br> 2. 检查CAN_H和CAN_L是否接反。 <br> 3. 确认所有节点的波特率设置一致。<br> 4. 确认是否两个通道发送了相同ID的帧。 |
| **LIN通信失败**        | 1. **首要检查GND是否共地**。 <br> 2. 确认网络中有且仅有一个主节点提供1kΩ上拉电阻。 <br> 3. 确认波特率设置一致。 |

## 📞 技术支持
- **邮箱**: wei.lei@figkey.com
- **官网**: https://www.figkey.com

## 📄 版权声明
版权所有 © 2025 丰柯科技。保留所有权利。  