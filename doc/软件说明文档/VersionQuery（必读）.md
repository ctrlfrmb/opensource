 # Version Query工具使用说明文档

> 版本：v1.0.0 | 作者：leiwei | 日期：2025-06-26

## 📖 简介

Version Query工具是一款专门用于VCI设备查询的实用工具。后续将扩展更多VCI设备管理功能。支持TCP和UDP双协议通信，提供图形化界面操作，可同时管理多达16个VCI设备。

**主要特点**：

- 🖥️ 友好的图形化界面
- 🌐 支持TCP/UDP双协议通信
- ⚙️ 灵活的网络配置管理
- 📊 支持16个设备管理
- 📝 完整的操作日志系统
- 🔧 可配置的连接参数
- 💾 配置信息持久化保存

## 📁 目录结构

```bash
VciTool_x64/
├── VersionQuery.exe               # 主程序
├── VciToolReleaseNote.txt         # 版本变更记录
├── common_api.dll                 # 通用API库
├── Qt5Core.dll                    # Qt核心库
├── Qt5Gui.dll                     # Qt图形界面库
├── Qt5Widgets.dll                 # Qt控件库
├── msvcp140.dll                   # 运行时库
├── vcruntime140.dll               # 运行时库
├── vcruntime140_1.dll             # 运行时库
├── config/                        # 配置文件目录
│   ├── common_config.ini          # 通用配置
│   └── vci/
│       └── vci_config.ini         # VCI配置
└── platforms/                     # Qt平台插件
    └── qwindows.dll
```

## 🚀 快速开始

### 系统要求

- **操作系统**: Windows 7/8/10/11 (64位)
- **网络**: 支持以太网连接
- **内存**: 最小128MB可用内存

### 使用步骤

1. **启动程序**
   - 双击 `VersionQuery.exe` 启动
   - 首次运行会自动创建配置文件

2. **配置网络**
   - 点击"设备配置"按钮
   - 设置网关地址和基础IP
   - 保存配置

3. **查询设备版本**
   - 选择要查询的设备
   - 点击"查询版本"按钮

## ⚙️ 配置说明

### 网络设置

#### 设备IP配置

- **网关地址**: 设备IP网段前缀，默认 `192.168.201`
- **基础IP**: 设备0对应的IP末位，默认 `130`
- **本地IP**: 本机网卡IP，留空自动选择。**如果当前主机连接了多个VCI设备时，查询异常时请输入连接设备的网卡配置IP地址**。

**设备IP规则**：

```
设备 0: 192.168.201.130
设备 1: 192.168.201.131
设备 8: 192.168.201.138
设备15: 192.168.201.145
```

### 配置文件

配置保存在 `config/vci/vci_config.ini`

## 🔧 功能使用

### 版本查询

1. **选择设备**: 从下拉框选择设备0-15
2. **查看IP**: 设备IP自动显示
3. **执行查询**: 点击"查询版本"按钮
4. **查看结果**: 版本信息显示在界面上

### 查询流程

程序按以下流程执行：

1. 根据配置选择协议（TCP/UDP优先）
2. 建立网络连接
3. 发送版本查询请求
4. 接收并解析响应
5. 显示版本信息（格式：`v1.2.3.4`）

### 日志系统

- 🔍 查询进度提示
- 📡 网络连接状态
- ⚙️ 协议配置信息
- ✅ 成功结果
- ❌ 失败原因

日志支持颜色标识和历史记录（最多1000条）。

## 🛠️ 高级配置

### 网络环境适配

#### 多网卡环境
配置本地IP为与VCI设备同网段的网卡IP，如：`192.168.201.100`

#### 防火墙设置
确保允许程序的TCP/UDP端口通信。

#### 超时时间调整
- **局域网**: 1000-3000毫秒
- **广域网**: 5000-10000毫秒
- **不稳定网络**: 10000-30000毫秒

### 协议选择
- **TCP优先**: 可靠性要求高
- **UDP优先**: 速度要求高

## ❗ 注意事项

- **IP范围**: 确保基础IP + 15 ≤ 255
- **端口冲突**: 避免使用已占用端口
- **网络连通**: 确保PC与VCI设备网络互通
- **设备索引**: 范围0-15

## 🔍 常见问题

| 问题         | 解决方案               |
| ------------ | ---------------------- |
| 查询失败     | 检查网络连接和IP配置   |
| 连接超时     | 增加超时时间或检查网络 |
| IP显示无效   | 检查网关和基础IP设置   |
| 程序无法启动 | 确保所有DLL文件完整    |

## 🔮 未来规划

VCI工具将在后续版本中扩展以下功能：
- 设备配置管理
- 固件升级
- 状态监控
- 批量操作
- 更多设备类型支持

## 📞 技术支持

- **邮箱**: wei.lei@figkey.com
- **官网**: https://www.figkey.com

## 📄 版权声明

版权所有 © 2025 丰柯科技。保留所有权利。  
