 # CAN2LIN转换工具使用说明文档

> 版本：v2.0.0 | 作者：leiwei | 日期：2025-07-28

## 📖 简介

CAN2LIN转换工具是一款专门用于CAN总线到LIN总线信号转换的实用工具。主要功能是将发动机转速信号(CAN)实时转换为机油泵控制信号(LIN)，支持自定义转速映射配置。

**主要特点**：

- 🖥️ 友好的图形化界面
- 🔄 实时CAN到LIN信号转换
- ⚙️ 支持自定义转速映射表
- 📊 实时转速显示和状态监控
- 📝 完整的操作日志系统
- 🔧 灵活的设备配置管理
- 💾 配置文件持久化保存

## 📁 目录结构

```bash
VciTool_x64/
├── CAN2LIN.exe           		   # 主程序
├── VciToolReleaseNote.txt         # 版本变更记录
├── common_api.dll                 # 通用API库
├── Qt5Core.dll                    # Qt核心库
├── Qt5Gui.dll                     # Qt图形界面库
├── Qt5Widgets.dll                 # Qt控件库
├── msvcp140.dll                   # 运行时库
├── vcruntime140.dll               # 运行时库
├── vcruntime140_1.dll             # 运行时库
├── config/                        # 配置文件目录
│   ├── common_config.ini          # 通用配置
│   ├── rpm_mapping.txt            # 转速映射配置
│   └── vci/
│       └── vci_config.ini         # VCI设备配置
└── platforms/                     # Qt平台插件
    └── qwindows.dll
```

## 🚀 快速开始

### 使用步骤

1. **启动程序**
   - 双击 `CAN2LIN.exe` 启动
   - 首次运行会加载默认转速映射表

2. **配置设备**
   - 点击"设备配置"按钮
   - 打开CAN通道和LIN通道
   - 确认设备状态显示"✅ 设备就绪"

3. **开始转换**
   - 点击"开始转换"按钮
   - 实时查看转速转换效果

## ⚙️ 配置说明

#### 配置文件格式

```txt
# CAN to LIN 转速映射配置文件
# 格式: 发动机转速 机油泵转速
# 注释行以#开头，空行将被忽略

# 怠速区间
600 300
800 400
1000 500

# 中速区间
2000 1000
3000 1500
4000 2000

# 高速区间
6000 3000
8000 4000
```

#### 映射规则

- **格式**: `发动机转速 机油泵转速` (空格分隔)
- **插值**: 自动对映射点之间进行线性插值
- **边界**: 超出范围时使用最接近的映射值

### 设备适配

#### CAN配置
- **波特率**: 根据ECU配置设置
- **过滤器**: 只接收0x120消息
- **错误处理**: 自动检测信号故障

#### LIN配置
- **主节点模式**: 作为LIN主节点发送
- **帧检查**: 使用增强校验
- **发送频率**: 根据转速变化自适应

## ❗ 注意事项

- **设备连接**: 确保CAN和LIN通道都已正确打开
- **配置文件**: 映射文件格式必须正确，否则使用默认配置
- **转速范围**: 发动机转速应在0-20000rpm范围内
- **实时性**: 转换延迟通常小于10ms

## 🔍 常见问题

| 问题         | 解决方案                     |
| ------------ | ---------------------------- |
| 设备未就绪   | 检查CAN/LIN通道是否正确打开  |
| 转换无数据   | 确认CAN消息0x120是否正常接收 |
| 配置加载失败 | 检查配置文件格式和内容       |
| LIN发送失败  | 检查LIN通道配置和连接状态    |
| 转速显示异常 | 确认信号解析参数是否正确     |

## 📞 技术支持

- **邮箱**: wei.lei@figkey.com
- **官网**: https://www.figkey.com

## 📄 版权声明

版权所有 © 2025 丰柯科技。保留所有权利。

## 
